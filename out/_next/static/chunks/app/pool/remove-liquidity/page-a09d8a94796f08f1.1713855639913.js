(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6732],{84893:function(e,n,t){Promise.resolve().then(t.bind(t,90670))},90670:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var o=t(27573),s=t(2801),l=t(51728),i=t(60775),a=t(99396),r=t(76718),d=t(93648),u=t(28790),c=t(95291),p=t(49178),m=t(2056),x=t.n(m),h=t(46230),v=t(32859),y=t(7653),f=t(50461);let k=()=>{let[e,n]=(0,y.useState)(null),[t,o]=(0,y.useState)(null),[l,i]=(0,y.useState)(""),[a,r]=(0,y.useState)(""),[d,u]=(0,y.useState)({slippagePercentage:1,deadlineTimestamp:60}),[c,p]=(0,y.useState)(!1),[m,x]=(0,y.useState)({isOpen:!1,txHash:"",txStatus:"SIGN_TX"}),{chain:h,blockchainMetadata:k}=(0,s.Os)(),b=(0,v.useSearchParams)(),{data:g,refetch:j}=(0,s.zj)(e,t,h),{mutateAsync:S}=(0,s.Am)(),{data:T}=(0,s.qo)({chain:h}),{mutateAsync:A}=(0,s.vU)(),C=(null==g?void 0:g.lpBalance)||0,Z=(null==g?void 0:g.pooledToken0)||0,N=(null==g?void 0:g.pooledToken1)||0,P=(null==g?void 0:g.poolShare)||0,w=(null==g?void 0:g.token0PriceOverToken1)||0,L=(null==g?void 0:g.token1PriceOverToken0)||0,O=Math.min(Number(l||0)*((null==g?void 0:g.totalLpSupply)||0)/((null==g?void 0:g.token0Supply)||1),Number(a||0)*((null==g?void 0:g.totalLpSupply)||0)/((null==g?void 0:g.token1Supply)||1)),I=(Number(null==g?void 0:g.lpBalance)-O)/((null==g?void 0:g.totalLpSupply)||1)*100;(0,y.useEffect)(()=>{U()},[h,JSON.stringify(T)]);let U=()=>{if(!T)return;let l=b.get("token0"),i=b.get("token1");if(l&&i&&!e&&!t&&l.toLowerCase()!==(null==i?void 0:i.toLowerCase())){let e=T.find(e=>e.address.toLowerCase()===l.toLowerCase()),t=T.find(e=>e.address.toLowerCase()===i.toLowerCase());n(e||T[0]),o(t||T.at(-1)||null);return}e||n(T[0]),t||o(T.find(e=>!(0,s.Mg)(e.address)&&!(0,s.N7)(e.address,h)&&e.address!==T[0].address)||null)},_=async()=>{if(!e||!t||!l||!a||!k||!g)return;p(!0);let n=f.Am.loading("Loading..."),o=k.addresses.uniswapV2Router;if(!(await A({tokenAddresses:[g.lpAddress],spender:o,minAmount:[Number(O)],onGiveAllowance:()=>{x({isOpen:!0,txHash:"",txStatus:"APPROVE_ALLOWANCE"})}})).success){f.Am.dismiss(n),p(!1);return}p(!0),await S({token0:e,token1:t,token0Amount:Number(l),token1Amount:Number(a),lpRemoved:O,slippacePercentage:d.slippagePercentage,deadline:d.deadlineTimestamp,onTxSent:e=>{let{txHash:t}=e;x({isOpen:!0,txHash:t,txStatus:"TX_IN_PROGRESS"}),f.Am.dismiss(n),(0,f.Am)("Transaction is sent",{type:"default"})},onTxSuccess:e=>{let{txHash:t}=e;x({isOpen:!0,txHash:t,txStatus:"TX_SUCCESS"}),f.Am.dismiss(n),(0,f.Am)("Transaction is success",{type:"success"})},onTxError:e=>{let{txHash:t}=e;x({isOpen:!0,txHash:t,txStatus:"TX_FAILED"}),f.Am.dismiss(n),(0,f.Am)("Transaction is error",{type:"error"})}}),j(),p(!1)},W=(0,s.Mg)(null==e?void 0:e.address)||(0,s.N7)(null==e?void 0:e.address,h),E=(0,s.Mg)(null==t?void 0:t.address)||(0,s.N7)(null==t?void 0:t.address,h),R=!1,D="Remove liquidity";return e&&t?l&&a?Number(l)>((null==g?void 0:g.pooledToken0)||0)?(R=!0,D="Insufficient ".concat(e.symbol," amount")):Number(a)>((null==g?void 0:g.pooledToken1)||0)?(R=!0,D="Insufficient ".concat(t.symbol," amount")):W&&E&&(R=!0,D="Incorrect token pair"):(R=!0,D="Please enter amount"):(R=!0,D="Please select token"),{token0:e,token1:t,token0Amount:l,token1Amount:a,settings:d,allTokens:T,onUpdateToken0:s=>{s.address===(null==t?void 0:t.address)?(n(s),o(e)):n(s),i(""),r("")},onUpdateToken1:s=>{s.address===(null==e?void 0:e.address)&&n(t),o(s),i(""),r("")},onUpdateToken0Amount:e=>{i(e),w&&(null==g?void 0:g.totalLpSupply)&&r(w*Number(e))},onUpdateToken1Amount:e=>{r(e),L&&(null==g?void 0:g.totalLpSupply)&&i(L*Number(e))},onUpdateSettings:e=>{u({...d,...e})},onReset:()=>{i(""),r(""),u({deadlineTimestamp:60,slippagePercentage:1}),p(!1),x({isOpen:!1,txHash:"",txStatus:"SIGN_TX"})},onRemoveLiquidity:_,isDisabled:R,ctaText:D,isLoading:c,v2PoolInfo:g,summary:{currentLpBalance:C,currentPooledToken0:Z,currentPooledToken1:N,currentPoolShare:P,token0Price:w,token1Price:L,lpRemoved:O,poolShareForAfterRemoved:I}}};var b=t(62731),g=t(45595);let j=()=>{let{walletAddress:e,connect:n,chain:t,setChain:m}=(0,s.Os)(),{token0:v,token0Amount:y,token1:f,token1Amount:j,summary:S,onUpdateToken0:T,onUpdateToken0Amount:A,onUpdateToken1:C,onUpdateToken1Amount:Z,v2PoolInfo:N,settings:P,onUpdateSettings:w,allTokens:L,onRemoveLiquidity:O,ctaText:I,isDisabled:U,isLoading:_}=k();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.Z,{maxWidth:"sm",sx:e=>({border:"1px solid ".concat(e.palette.outline),p:"1rem",borderRadius:"1rem",maxWidth:"600px !important"}),children:[(0,o.jsxs)(l.m0,{children:[(0,o.jsxs)(l.ZP,{children:[(0,o.jsx)(x(),{href:"/pool",children:(0,o.jsx)(a.Z,{sx:{mr:"1rem"},children:(0,o.jsx)(p.Z,{sx:{width:"20px"}})})}),(0,o.jsx)(r.Z,{fontWeight:600,variant:"h6",children:"Remove Liquidity"})]}),(0,o.jsx)(b._,{slippagePercentage:P.slippagePercentage,deadline:P.deadlineTimestamp,onUpdateSettings:w})]}),(0,o.jsx)(r.Z,{color:"text.secondary",variant:"body2",sx:{mt:"1rem"},children:"Tip: When you add liquidity, you will receive pool tokens representing your position. These tokens automatically earn fees proportional to your share of the pool, and can be redeemed at any time."}),(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(h.r,{token:v,amount:y,onUpdateAmount:A,onUpdateToken:T,balance:(null==N?void 0:N.pooledToken0)||0,tokens:L||[]}),(0,o.jsx)(h.r,{token:f,amount:j,onUpdateAmount:Z,onUpdateToken:C,balance:(null==N?void 0:N.pooledToken1)||0,tokens:L||[]})]}),(0,o.jsx)(r.Z,{variant:"body1",fontWeight:600,sx:{mt:"1rem"},children:"prices and Updated pool share"}),(0,o.jsxs)(d.Z,{sx:e=>({display:"flex",justifyContent:"space-between",alignItems:"center",background:e.palette.background.paper,p:"1rem",borderRadius:"1rem",mt:"1rem"}),children:[(0,o.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,o.jsx)(r.Z,{variant:"h5",fontWeight:600,display:"block",children:(0,s.C1)(S.token1Price,4)}),(0,o.jsxs)(r.Z,{variant:"body1",color:"text.secondary",children:[null==v?void 0:v.symbol," per ",null==f?void 0:f.symbol]})]}),(0,o.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,o.jsx)(r.Z,{variant:"h5",fontWeight:600,display:"block",children:(0,s.C1)(S.token0Price,4)}),(0,o.jsxs)(r.Z,{variant:"body1",color:"text.secondary",children:[null==f?void 0:f.symbol," per ",null==v?void 0:v.symbol]})]}),(0,o.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,o.jsxs)(r.Z,{variant:"h5",fontWeight:600,display:"block",children:[(0,s.az)(S.poolShareForAfterRemoved,0,2),"%"]}),(0,o.jsx)(r.Z,{variant:"body1",color:"text.secondary",children:"Updated Share of pool"})]})]}),e&&!!t&&(0,o.jsx)(u.Z,{variant:"contained",fullWidth:!0,sx:{mt:"1rem"},disabled:U||_,onClick:O,children:I}),e&&!t&&(0,o.jsx)(u.Z,{variant:"contained",fullWidth:!0,sx:{mt:"1rem"},onClick:()=>m(c.Ez[0].chainIdHex),children:"Change network"}),!e&&(0,o.jsx)(u.Z,{variant:"contained",fullWidth:!0,sx:{mt:"1rem"},onClick:()=>n(),children:"connect Wallet"})]}),(0,o.jsx)(g.I,{v2Pool:N})]})};function S(){return(0,o.jsx)("main",{style:{minHeight:"80vh",background:"#000",paddingTop:"8rem"},children:(0,o.jsx)(d.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",pb:"4rem"},children:(0,o.jsx)(s.hu,{children:(0,o.jsx)(j,{})})})})}}},function(e){e.O(0,[5211,7359,571,7219,6928,2436,9749,2613,1970,4763,2844,6230,1293,4016,1744],function(){return e(e.s=84893)}),_N_E=e.O()}]);